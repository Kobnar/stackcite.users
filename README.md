# Stackcite Users Endpoint

A micro-service which manages users and authentication.

```text
/               [POST]
/{userId}/      [GET, PUT, DELETE]
/conf/          [POST, PUT]
/auth/          [POST, PUT, DELETE]
```

## Create a new user

Creating a new user is two-step process. First, you must submit a request to
create a new user. When that request is submitted, the server will automatically
generate a one-time-use confirmation token key. This key must be submitted in a
second request to activate the new user's account.

If there is a problem with the confirmation token's key (e.g. it has expired),
a new token can be generated by submitting a separate request to the server.

### Step 1: Submit a new user creation request

***Endpoint:*** ``/``

***Method:*** ``POST``

***Required Headers:***
```text
{}
```

***Request Body:***
```text
{
    "email": emailAddress,
    "password": string
}
```

### Step 2: Submit a user account confirmation request

***Endpoint:*** ``/conf/``

***Method:*** ``PUT``

***Request Body:***
```text
{
    "key": string
}
```

### Extra: Request a new confirmation token

***Endpoint:*** ``/conf/``

***Method:*** ``POST``

***Request Body:***
```text
{
    "email": emailAddress
}
```

## Retrieve a single user's data

***Endpoint:*** ``/{userId}/``

***Method:*** ``GET``

***Required Headers:***
```text
{
    "Authorization": "key <tokenKey>"
}
```

### Update a single user's data

***Endpoint:*** ``/{userId}/``

***Method:*** ``PUT``

***Required Headers:***
```text
{
    "Authorization": "key <tokenKey>"
}
```

***Request Body:***
```text
{
    "email": emailAddress,
    "password": string",
    "newPassword": string
    "groups": [string]
}
```

### Delete a single user's account

***Endpoint:*** ``/{userId}/``

***Method:*** ``DELETE``

***Required Headers:***
```text
{
    "Authorization": "key <tokenKey>"
}
```

## Manage an API session

The Stackcite API uses a session key to manage resource authorization. To
generate a new session key, you must submit a request to the authentication
endpoint. Sessions automatically expire if they are not active for a certain
amount of time, which is indicted by submitting an update request to the
server.

### Create a new API session

***Endpoint:*** ``/auth/``

***Method:*** ``POST``

***Required Headers:***
```text
{}
```

***Request Body:***
```text
{
    "email": emailAddress,
    "password": string
}
```

***Response Body:***
```text
{
    "key": string
}
```

### Update an existing API session

***Endpoint:*** ``/auth/``

***Method:*** ``PUT``

***Required Headers:***
```text
{
    "Authorization": "key <tokenKey>"
}
```

***Request Body:***
```text
null
```

### Expire an existing API session

***Endpoint:*** ``/auth/``

***Method:*** ``DELETE``

***Required Headers:***
```text
{
    "Authorization": "key <tokenKey>"
}
```
